<!-- Loader -->
<div *ngIf="loader.loading()" class="loader-overlay">
  <mat-spinner></mat-spinner>
</div>

<mat-card class="history-card" *ngIf="history.length">
  <mat-card-title>ðŸ’± Conversion History</mat-card-title>

  <!-- Responsive wrapper -->
  <div class="responsive-table">

    <table mat-table [dataSource]="history" class="mat-elevation-z2 full-width">

      <!-- From -->
      <ng-container matColumnDef="fromCurrency">
        <th mat-header-cell *matHeaderCellDef>From</th>
        <td mat-cell *matCellDef="let h">{{ h.fromCurrency }}</td>
      </ng-container>

      <!-- To -->
      <ng-container matColumnDef="toCurrency">
        <th mat-header-cell *matHeaderCellDef>To</th>
        <td mat-cell *matCellDef="let h">{{ h.toCurrency }}</td>
      </ng-container>

      <!-- Amount -->
      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let h">
          {{ h.amount | number:'1.2-2' }}
        </td>
      </ng-container>

      <!-- Converted -->
      <ng-container matColumnDef="convertedAmount">
        <th mat-header-cell *matHeaderCellDef>Converted</th>
        <td mat-cell *matCellDef="let h">
          {{ h.convertedAmount | number:'1.2-2' }}
        </td>
      </ng-container>

      <!-- Rate -->
      <ng-container matColumnDef="rate">
        <th mat-header-cell *matHeaderCellDef>Rate</th>
        <td mat-cell *matCellDef="let h">
          {{ h.rate | number:'1.4-4' }}
        </td>
      </ng-container>

      <!-- Date -->
      <ng-container matColumnDef="conversionDate">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        <td mat-cell *matCellDef="let h">
          {{ h.conversionDate | date:'shortDate' }}
        </td>
      </ng-container>

      <!-- Status -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let h">
          <span class="badge">{{ h.status }}</span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>
  </div>
</mat-card>

<!-- Empty state -->
<mat-card *ngIf="!history.length && !loader.loading()">
  <mat-card-content>No conversion history available.</mat-card-content>
</mat-card>
